{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2b5cfc44_4c4e9f73",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/UpdateGitMetricsTask.java",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2022-06-13T20:58:54Z",
      "side": 1,
      "message": "The `repository` we get at L#55 could be a `SharedRefDbRepository`, hence a `DelegateRepository`, i.e.: in the multi-site.\n\nLater in the code, L#66, I need a `FileRepository` to extract stats.\n\nTo unwrap the `SharedRefDbRepository` and cast it to a `FileRepository`, I need to call the `delegate()` method `protected`.\n\nI was thinking, of either adding a method in the `SharedRefDbRepository` to expose the original `Repository` or making public the current `delegate()` method.\n\nI am tempted to go for the latter.\n\nWDYT is the best approach?",
      "revId": "476ce30cdd8145e200c61e3ededeefd48d2411f0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52ab874a_7e419975",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/UpdateGitMetricsTask.java",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-06-15T08:35:57Z",
      "side": 1,
      "message": "IIUIC adding method to `SharedRefDbRepository` will not help you here as you would need that class being a part of this plugin class loader, If that is correct then making `delegate` public seems the only way to solve that puzzle, but the downsize would be that it would work against the `master` only...\n\nApart from that it can (theoretically though ;)) be a delegate to delegate (and maybe it will be at some point) so maybe it make sense to walk-up the three until it is no longer `DelegateRepository` - just thinking out loud ;)",
      "parentUuid": "2b5cfc44_4c4e9f73",
      "revId": "476ce30cdd8145e200c61e3ededeefd48d2411f0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}