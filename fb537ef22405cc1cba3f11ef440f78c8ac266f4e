{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "898c0e8d_343066cb",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/GitRepoMetricsCache.java",
        "patchSetId": 11
      },
      "lineNbr": 42,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-04-29T12:36:50Z",
      "side": 1,
      "message": "```suggestion\n  private final ConcurrentHashMap\u003cString, ConcurrentHashMap\u003cString, Long\u003e\u003e metrics;\n```",
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "86b5117c_0d5a39ed",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/GitRepoMetricsCache.java",
        "patchSetId": 11
      },
      "lineNbr": 42,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-04-29T13:31:40Z",
      "side": 1,
      "message": "Fix applied.",
      "parentUuid": "898c0e8d_343066cb",
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a2cce2ac_236978f2",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/GitRepoMetricsCache.java",
        "patchSetId": 11
      },
      "lineNbr": 42,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-04-29T13:31:40Z",
      "side": 1,
      "message": "Fix applied.",
      "parentUuid": "898c0e8d_343066cb",
      "fixSuggestions": [
        {
          "fixId": "062b7e89_c56f31a9",
          "description": "User suggestion",
          "replacements": [
            {
              "path": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/GitRepoMetricsCache.java",
              "range": {
                "startLine": 42,
                "startChar": 0,
                "endLine": 42,
                "endChar": 77
              },
              "replacement": "  private final ConcurrentHashMap\u003cString, ConcurrentHashMap\u003cString, Long\u003e\u003e metrics;"
            }
          ]
        }
      ],
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3028db66_ee221d2e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/GitRepoMetricsCache.java",
        "patchSetId": 11
      },
      "lineNbr": 93,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-04-29T12:36:50Z",
      "side": 1,
      "message": "In what cases will the metric have a trailing slash?",
      "range": {
        "startLine": 92,
        "startChar": 11,
        "endLine": 93,
        "endChar": 82
      },
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0ddf9408_294fb275",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/GitRepoMetricsCache.java",
        "patchSetId": 11
      },
      "lineNbr": 93,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-04-29T13:31:40Z",
      "side": 1,
      "message": "Metrics with parameters end with a slash (or `_` in prometheus)",
      "parentUuid": "3028db66_ee221d2e",
      "range": {
        "startLine": 92,
        "startChar": 11,
        "endLine": 93,
        "endChar": 82
      },
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c11765f2_1ae1a61a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/GitRepoMetricsCache.java",
        "patchSetId": 11
      },
      "lineNbr": 111,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-04-29T12:36:50Z",
      "side": 1,
      "message": "In what cases can happen that we don\u0027t find `metric` in the `metrics` hashmap?\n- `metrics` is populated by `setMetrics` L81 \n- This method (`createNewCallbackMetric`) is also called by `setMetrics` L85.\n\nWon\u0027t we always find `metric` in `metrics`, then?",
      "range": {
        "startLine": 110,
        "startChar": 0,
        "endLine": 111,
        "endChar": 31
      },
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c1fb2f8b_1914475d",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/GitRepoMetricsCache.java",
        "patchSetId": 11
      },
      "lineNbr": 111,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-04-29T13:31:40Z",
      "side": 1,
      "message": "True, let me just leave a sentinel with an illegal state exception.",
      "parentUuid": "c11765f2_1ae1a61a",
      "range": {
        "startLine": 110,
        "startChar": 0,
        "endLine": 111,
        "endChar": 31
      },
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66411ad4_b424a19c",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/GitRepoMetricsCache.java",
        "patchSetId": 11
      },
      "lineNbr": 121,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-04-29T12:36:50Z",
      "side": 1,
      "message": "unrelated: This is unused",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 121,
        "endChar": 3
      },
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "40e7b879_fcfed212",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/GitRepoMetricsCache.java",
        "patchSetId": 11
      },
      "lineNbr": 121,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-04-29T13:31:40Z",
      "side": 1,
      "message": "Will fix in a separate change.",
      "parentUuid": "66411ad4_b424a19c",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 121,
        "endChar": 3
      },
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6961560f_d1cea9ff",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/gitrepometrics/GitRepoMetricsCache.java",
        "patchSetId": 11
      },
      "lineNbr": 121,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-04-29T13:48:16Z",
      "side": 1,
      "message": "Done with I607d6bf80",
      "parentUuid": "40e7b879_fcfed212",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 121,
        "endChar": 3
      },
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b23adc9_b8074b60",
        "filename": "src/resources/Documentation/config.md",
        "patchSetId": 11
      },
      "lineNbr": 29,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-04-29T12:36:50Z",
      "side": 1,
      "message": "How about linking to the already-existing and comprehensive documentation about metric names sanitization in Gerrit [1] rather than duplicating it here?\n\n[1] https://gerrit-review.googlesource.com/Documentation/dev-plugins.html#_providing_own_metrics",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 12
      },
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fbd86664_c08798eb",
        "filename": "src/resources/Documentation/config.md",
        "patchSetId": 11
      },
      "lineNbr": 29,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-04-29T13:31:40Z",
      "side": 1,
      "message": "I thought about it, but the issue is the lack of a direct anchor to that point, which may then risk losing the context and effectiveness.\n\nI prefer to have a limited _copy \u0026 paste_ of documentation for making it clearer and more accessible.",
      "parentUuid": "9b23adc9_b8074b60",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 12
      },
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fbd93fac_1d094144",
        "filename": "src/resources/Documentation/config.md",
        "patchSetId": 11
      },
      "lineNbr": 29,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-04-29T14:12:22Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "fbd86664_c08798eb",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 12
      },
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b96795ba_c3ba7544",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/gitrepometrics/MetricsInitializerIT.java",
        "patchSetId": 11
      },
      "lineNbr": 80,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2025-04-29T12:36:50Z",
      "side": 1,
      "message": "Consider adding a test for a repository containing dots (i.e. `test.with.dot `).",
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f0789db6_e4f09842",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/gitrepometrics/MetricsInitializerIT.java",
        "patchSetId": 11
      },
      "lineNbr": 80,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-04-29T13:31:40Z",
      "side": 1,
      "message": "Good idea, will add as a separate additional test, which demonstrates the bug.",
      "parentUuid": "b96795ba_c3ba7544",
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "beb3f5fe_994127c0",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/gitrepometrics/MetricsInitializerIT.java",
        "patchSetId": 11
      },
      "lineNbr": 80,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-04-29T13:48:16Z",
      "side": 1,
      "message": "Done with Iae9946f211",
      "parentUuid": "f0789db6_e4f09842",
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "74c5c5f6_38bfcafa",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/gitrepometrics/MetricsInitializerIT.java",
        "patchSetId": 11
      },
      "lineNbr": 80,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-04-29T18:59:01Z",
      "side": 1,
      "message": "Actually, the MetricInitializerIT already had a repository with the dots in the name `com.googlesource.gerrit.plugins.gitrepometrics.MetricsInitializerIT_shouldCollectAllRepositoriesMetrics_project.git`: the issue was that the test was asserting that the repository won\u0027t have any metrics collected, therefore the test was green with a wrong assertion.",
      "parentUuid": "beb3f5fe_994127c0",
      "revId": "fb537ef22405cc1cba3f11ef440f78c8ac266f4e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}